<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GLM Modelling with mverse • mverse</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="GLM Modelling with mverse">
<meta property="og:description" content="mverse">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">mverse</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="divider">
    </li>
<li class="dropdown-header">Examples</li>
    <li>
      <a href="../articles/mverse_gettingstarted.html">Getting started with mverse</a>
    </li>
    <li>
      <a href="../articles/mverse_intro_glmmodelling.html">GLM Modelling with mverse</a>
    </li>
    <li>
      <a href="../articles/mverse_intro_regressionmodelling.html">Basic Regressions with mverse</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/mverseanalysis/mverse/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="mverse_intro_glmmodelling_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>GLM Modelling with mverse</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/mverseanalysis/mverse/blob/HEAD/vignettes/mverse_intro_glmmodelling.Rmd" class="external-link"><code>vignettes/mverse_intro_glmmodelling.Rmd</code></a></small>
      <div class="hidden name"><code>mverse_intro_glmmodelling.Rmd</code></div>

    </div>

    
    
<p>This vignette aims to introduce the workflow of a multiverse analysis with GLM modelling using <code>mverse</code>.</p>
<p>The typical workflow of a multiverse analysis with <code>mverse</code> is</p>
<ol style="list-style-type: decimal">
<li>Initialize a <code>multiverse</code> object with the dataset.</li>
<li>Define all the different data analyses (i.e., analytical decisions) as <em>branches</em>.</li>
<li>Add defined <em>branches</em> into the <code>multiverse</code> object.</li>
<li>Run models, hypothesis tests, and plots.</li>
</ol>
<div class="section level2">
<h2 id="exploring-the-severity-of-feminine-named-versus-masculine-named-hurricanes">Exploring The Severity Of Feminine-named Versus Masculine-named Hurricanes<a class="anchor" aria-label="anchor" href="#exploring-the-severity-of-feminine-named-versus-masculine-named-hurricanes"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/mverseanalysis/mverse/" class="external-link">mverse</a></span><span class="op">)</span></code></pre></div>
<p><code>mverse</code> ships with the <code>hurricane</code> dataset used in <span class="citation">Jung et al. (2014)</span>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">hurricane</span><span class="op">)</span>
<span class="co">## Rows: 94</span>
<span class="co">## Columns: 14</span>
<span class="co">## $ Year                     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1950, 1950, 1952, 1953, 1953, 1954, 1954, 195…</span>
<span class="co">## $ Name                     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Easy", "King", "Able", "Barbara", "Florence"…</span>
<span class="co">## $ MasFem                   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 6.777778, 1.388889, 3.833333, 9.833333, 8.333…</span>
<span class="co">## $ MinPressure_before       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 958, 955, 985, 987, 985, 960, 954, 938, 962, …</span>
<span class="co">## $ Minpressure_Updated_2014 <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 960, 955, 985, 987, 985, 960, 954, 938, 962, …</span>
<span class="co">## $ Gender_MF                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, …</span>
<span class="co">## $ Category                 <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 3, 3, 1, 1, 1, 3, 3, 4, 3, 1, 3, 2, 3, 1, 3, …</span>
<span class="co">## $ alldeaths                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 2, 4, 3, 1, 0, 60, 20, 20, 0, 200, 7, 15, 1, …</span>
<span class="co">## $ NDAM                     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1590, 5350, 150, 58, 15, 19321, 3230, 24260, …</span>
<span class="co">## $ Elapsed.Yrs              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 63, 63, 61, 60, 60, 59, 59, 59, 58, 58, 58, 5…</span>
<span class="co">## $ Source                   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "MWR", "MWR", "MWR", "MWR", "MWR", "MWR", "MW…</span>
<span class="co">## $ HighestWindSpeed         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 120, 130, 85, 85, 85, 120, 120, 145, 120, 85,…</span>
<span class="co">## $ MasFem_MTUrk             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 5.40625, 1.59375, 2.96875, 8.62500, 7.87500, …</span>
<span class="co">## $ NDAM15                   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1870, 6030, 170, 65, 18, 21375, 3520, 28500, …</span></code></pre></div>
<p>To start a multiverse analysis, first use <code>create_multiverse</code> to create an <code>mverse</code> object with <code>hurricane</code>. At this point the multiverse is empty.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">hurricane_mv</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mverse.html">create_multiverse</a></span><span class="op">(</span><span class="va">hurricane</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="define-branches-in-the-hurricane-multiverse">Define Branches in the Hurricane Multiverse<a class="anchor" aria-label="anchor" href="#define-branches-in-the-hurricane-multiverse"></a>
</h2>
<p>Each branch defines a different statistical analysis by using a subset of data, transforming columns, or a statistical model. Each combination of these branches defines a “universe”, or analysis path. Branches are defined using <code>X_branch(...)</code>, where <code>...</code> are expressions that define a data wrangling or modelling option/analytic decision that you wish to explore, such as excluding certain hurricane names from an analysis, deriving new variables for analysis (mutating), or using different models. Once branches are defined we can look at the impact of the combination of these decisions.</p>
<div class="section level3">
<h3 id="branches-for-data-munipulation">Branches for Data munipulation<a class="anchor" aria-label="anchor" href="#branches-for-data-munipulation"></a>
</h3>
<p><code>filter_branch</code> takes logical predicates, and finds the observations where the condition is <code>TRUE</code>.</p>
<p>The distribution of <code>alldeaths</code> is shown below.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">hurricane</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">alldeaths</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html" class="external-link">geom_histogram</a></span><span class="op">(</span>bins <span class="op">=</span> <span class="fl">25</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html" class="external-link">stat_bin</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="va">..count..</span><span class="op">)</span>, bins <span class="op">=</span> <span class="fl">25</span>, geom <span class="op">=</span> <span class="st">"text"</span>, vjust <span class="op">=</span> <span class="op">-</span><span class="fl">.7</span>, size <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></code></pre></div>
<p><img src="mverse_intro_glmmodelling_files/figure-html/unnamed-chunk-1-1.png" width="1008"></p>
<p>It looks like there are a few outliers. Let’s find out the names of these hurricanes.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">hurricane</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">alldeaths</span> <span class="op">&gt;</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html" class="external-link">median</a></span><span class="op">(</span><span class="va">alldeaths</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">alldeaths</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">Name</span>, <span class="va">alldeaths</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">## <span style="color: #949494;"># A tibble: 6 × 2</span></span>
<span class="co">##   Name    alldeaths</span>
<span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">## <span style="color: #BCBCBC;">1</span> Katrina      <span style="text-decoration: underline;">1</span>833</span>
<span class="co">## <span style="color: #BCBCBC;">2</span> Audrey        416</span>
<span class="co">## <span style="color: #BCBCBC;">3</span> Camille       256</span>
<span class="co">## <span style="color: #BCBCBC;">4</span> Diane         200</span>
<span class="co">## <span style="color: #BCBCBC;">5</span> Sandy         159</span>
<span class="co">## <span style="color: #BCBCBC;">6</span> Agnes         117</span></code></pre></div>
<p><code><a href="../reference/filter_branch.html">filter_branch()</a></code> can be used to exclude outliers. Excluding hurricane <code>Katrina</code> or <code>Audrey</code> removes the hurricanes with the most deaths.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">death_outliers</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/filter_branch.html">filter_branch</a></span><span class="op">(</span>obs_all <span class="op">=</span> <span class="cn">TRUE</span>, 
                                obs_noKat <span class="op">=</span> <span class="va">Name</span> <span class="op">!=</span> <span class="st">'Katrina'</span>,
                                obs_noKatAud <span class="op">=</span> <span class="op">!</span><span class="op">(</span><span class="va">Name</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Katrina'</span>, <span class="st">'Audrey'</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>Now, let’s add this branch to <code>hurricane_mv</code>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">hurricane_mv</span> <span class="op">&lt;-</span> <span class="va">hurricane_mv</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/add_filter_branch.html">add_filter_branch</a></span><span class="op">(</span><span class="va">death_outliers</span><span class="op">)</span>

<span class="fu"><a href="../reference/summary.html">summary</a></span><span class="op">(</span><span class="va">hurricane_mv</span><span class="op">)</span>
<span class="co">## <span style="color: #949494;"># A tibble: 3 × 2</span></span>
<span class="co">##   universe death_outliers_branch                    </span>
<span class="co">##   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>                                    </span>
<span class="co">## <span style="color: #BCBCBC;">1</span> 1        <span style="color: #949494;">"</span>TRUE<span style="color: #949494;">"</span>                                   </span>
<span class="co">## <span style="color: #BCBCBC;">2</span> 2        <span style="color: #949494;">"</span>Name != \"Katrina\"<span style="color: #949494;">"</span>                    </span>
<span class="co">## <span style="color: #BCBCBC;">3</span> 3        <span style="color: #949494;">"</span>!(Name %in% c(\"Katrina\", \"Audrey\"))<span style="color: #949494;">"</span></span></code></pre></div>
<p><code><a href="../reference/mutate_branch.html">mutate_branch()</a></code> takes expressions that can modify data columns, and can be used to provide different definitions or transformations of a column.</p>
<p>Consider two different definitions of femininity: <code>Gender_MF</code> is a binary classification of gender, and <code>MasFem</code> is a continuous rating of Femininity.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">femininity</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mutate_branch.html">mutate_branch</a></span><span class="op">(</span>binary_gender <span class="op">=</span> <span class="va">Gender_MF</span>, 
                            cts_gender <span class="op">=</span> <span class="va">MasFem</span><span class="op">)</span></code></pre></div>
<p>Consider normalized damage (<code>NDAM</code>) and the log of <code>NDAM</code>.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">damage</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mutate_branch.html">mutate_branch</a></span><span class="op">(</span>damage_orig <span class="op">=</span> <span class="va">NDAM</span>, 
                        damage_log <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">NDAM</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>Now, let’s add these branches to <code>hurricane_mv</code>.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">hurricane_mv</span> <span class="op">&lt;-</span> <span class="va">hurricane_mv</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/add_mutate_branch.html">add_mutate_branch</a></span><span class="op">(</span><span class="va">femininity</span>, <span class="va">damage</span><span class="op">)</span>

<span class="fu"><a href="../reference/summary.html">summary</a></span><span class="op">(</span><span class="va">hurricane_mv</span><span class="op">)</span>
<span class="co">## <span style="color: #949494;"># A tibble: 12 × 4</span></span>
<span class="co">##    universe death_outliers_branch                 femininity_bran… damage_branch</span>
<span class="co">##    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>                                 <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>        </span>
<span class="co">## <span style="color: #BCBCBC;"> 1</span> 1        <span style="color: #949494;">"</span>TRUE<span style="color: #949494;">"</span>                                Gender_MF        NDAM         </span>
<span class="co">## <span style="color: #BCBCBC;"> 2</span> 2        <span style="color: #949494;">"</span>TRUE<span style="color: #949494;">"</span>                                Gender_MF        log(NDAM)    </span>
<span class="co">## <span style="color: #BCBCBC;"> 3</span> 3        <span style="color: #949494;">"</span>TRUE<span style="color: #949494;">"</span>                                MasFem           NDAM         </span>
<span class="co">## <span style="color: #BCBCBC;"> 4</span> 4        <span style="color: #949494;">"</span>TRUE<span style="color: #949494;">"</span>                                MasFem           log(NDAM)    </span>
<span class="co">## <span style="color: #BCBCBC;"> 5</span> 5        <span style="color: #949494;">"</span>Name != \"Katrina\"<span style="color: #949494;">"</span>                 Gender_MF        NDAM         </span>
<span class="co">## <span style="color: #BCBCBC;"> 6</span> 6        <span style="color: #949494;">"</span>Name != \"Katrina\"<span style="color: #949494;">"</span>                 Gender_MF        log(NDAM)    </span>
<span class="co">## <span style="color: #BCBCBC;"> 7</span> 7        <span style="color: #949494;">"</span>Name != \"Katrina\"<span style="color: #949494;">"</span>                 MasFem           NDAM         </span>
<span class="co">## <span style="color: #BCBCBC;"> 8</span> 8        <span style="color: #949494;">"</span>Name != \"Katrina\"<span style="color: #949494;">"</span>                 MasFem           log(NDAM)    </span>
<span class="co">## <span style="color: #BCBCBC;"> 9</span> 9        <span style="color: #949494;">"</span>!(Name %in% c(\"Katrina\", \"Audrey… Gender_MF        NDAM         </span>
<span class="co">## <span style="color: #BCBCBC;">10</span> 10       <span style="color: #949494;">"</span>!(Name %in% c(\"Katrina\", \"Audrey… Gender_MF        log(NDAM)    </span>
<span class="co">## <span style="color: #BCBCBC;">11</span> 11       <span style="color: #949494;">"</span>!(Name %in% c(\"Katrina\", \"Audrey… MasFem           NDAM         </span>
<span class="co">## <span style="color: #BCBCBC;">12</span> 12       <span style="color: #949494;">"</span>!(Name %in% c(\"Katrina\", \"Audrey… MasFem           log(NDAM)</span></code></pre></div>
<p>Each row of the multiverse <code>hurricane_mv</code> corresponds to each combination of <code>death_outliers</code> (3), <code>femininity</code> (2), and <code>damage</code> (2) for a total of <span class="math inline">\(3 \times 2 \times 2 = 12\)</span> combinations.</p>
</div>
<div class="section level3">
<h3 id="glm-branches-for-modelling">GLM Branches for Modelling<a class="anchor" aria-label="anchor" href="#glm-branches-for-modelling"></a>
</h3>
<p><code>mverse</code> can define different <code><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm()</a></code> models as branches. The formula for a <code>glm</code> model (e.g., <code>y ~ x</code>) can be defined using <code>formula_branch</code>, and <code>family_branch</code> defines the member of the exponential family used via a <code>family</code> object.</p>
<p>We can create formulas using the branches above or simply use the columns in dataframe. If we use the branches <code>depvars</code>, <code>damage</code>, and <code>depvars</code> in a formula such as</p>
<p><code>depvars ~ damage + femininity</code></p>
<p>We can add it to <code>hurricane_mv</code> with <code><a href="../reference/add_formula_branch.html">add_formula_branch()</a></code>.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">models</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/formula_branch.html">formula_branch</a></span><span class="op">(</span><span class="va">alldeaths</span> <span class="op">~</span> <span class="va">damage</span> <span class="op">+</span> <span class="va">femininity</span><span class="op">)</span>

<span class="va">hurricane_mv</span> <span class="op">&lt;-</span> <span class="va">hurricane_mv</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/add_formula_branch.html">add_formula_branch</a></span><span class="op">(</span><span class="va">models</span><span class="op">)</span>

<span class="fu"><a href="../reference/summary.html">summary</a></span><span class="op">(</span><span class="va">hurricane_mv</span><span class="op">)</span>
<span class="co">## <span style="color: #949494;"># A tibble: 12 × 5</span></span>
<span class="co">##    universe death_outliers_branch   femininity_bran… damage_branch models_branch</span>
<span class="co">##    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>                   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>        </span>
<span class="co">## <span style="color: #BCBCBC;"> 1</span> 1        <span style="color: #949494;">"</span>TRUE<span style="color: #949494;">"</span>                  Gender_MF        NDAM          alldeaths ~ …</span>
<span class="co">## <span style="color: #BCBCBC;"> 2</span> 2        <span style="color: #949494;">"</span>TRUE<span style="color: #949494;">"</span>                  Gender_MF        log(NDAM)     alldeaths ~ …</span>
<span class="co">## <span style="color: #BCBCBC;"> 3</span> 3        <span style="color: #949494;">"</span>TRUE<span style="color: #949494;">"</span>                  MasFem           NDAM          alldeaths ~ …</span>
<span class="co">## <span style="color: #BCBCBC;"> 4</span> 4        <span style="color: #949494;">"</span>TRUE<span style="color: #949494;">"</span>                  MasFem           log(NDAM)     alldeaths ~ …</span>
<span class="co">## <span style="color: #BCBCBC;"> 5</span> 5        <span style="color: #949494;">"</span>Name != \"Katrina\"<span style="color: #949494;">"</span>   Gender_MF        NDAM          alldeaths ~ …</span>
<span class="co">## <span style="color: #BCBCBC;"> 6</span> 6        <span style="color: #949494;">"</span>Name != \"Katrina\"<span style="color: #949494;">"</span>   Gender_MF        log(NDAM)     alldeaths ~ …</span>
<span class="co">## <span style="color: #BCBCBC;"> 7</span> 7        <span style="color: #949494;">"</span>Name != \"Katrina\"<span style="color: #949494;">"</span>   MasFem           NDAM          alldeaths ~ …</span>
<span class="co">## <span style="color: #BCBCBC;"> 8</span> 8        <span style="color: #949494;">"</span>Name != \"Katrina\"<span style="color: #949494;">"</span>   MasFem           log(NDAM)     alldeaths ~ …</span>
<span class="co">## <span style="color: #BCBCBC;"> 9</span> 9        <span style="color: #949494;">"</span>!(Name %in% c(\"Katri… Gender_MF        NDAM          alldeaths ~ …</span>
<span class="co">## <span style="color: #BCBCBC;">10</span> 10       <span style="color: #949494;">"</span>!(Name %in% c(\"Katri… Gender_MF        log(NDAM)     alldeaths ~ …</span>
<span class="co">## <span style="color: #BCBCBC;">11</span> 11       <span style="color: #949494;">"</span>!(Name %in% c(\"Katri… MasFem           NDAM          alldeaths ~ …</span>
<span class="co">## <span style="color: #BCBCBC;">12</span> 12       <span style="color: #949494;">"</span>!(Name %in% c(\"Katri… MasFem           log(NDAM)     alldeaths ~ …</span></code></pre></div>
<p>Finally, let’s create a <code><a href="../reference/family_branch.html">family_branch()</a></code> that defines two different members of the Exponential family as branches.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">distributions</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/family_branch.html">family_branch</a></span><span class="op">(</span><span class="va">poisson</span>, <span class="va">gaussian</span><span class="op">)</span></code></pre></div>
<p>Adding this branch to <code>hurricane_mv</code> with <code><a href="../reference/add_family_branch.html">add_family_branch()</a></code>.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">hurricane_mv</span> <span class="op">&lt;-</span> <span class="va">hurricane_mv</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/add_family_branch.html">add_family_branch</a></span><span class="op">(</span><span class="va">distributions</span><span class="op">)</span>

<span class="fu"><a href="../reference/summary.html">summary</a></span><span class="op">(</span><span class="va">hurricane_mv</span><span class="op">)</span>
<span class="co">## <span style="color: #949494;"># A tibble: 24 × 6</span></span>
<span class="co">##    universe death_outliers_branch femininity_branch damage_branch models_branch </span>
<span class="co">##    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>         </span>
<span class="co">## <span style="color: #BCBCBC;"> 1</span> 1        <span style="color: #949494;">"</span>TRUE<span style="color: #949494;">"</span>                Gender_MF         NDAM          alldeaths ~ d…</span>
<span class="co">## <span style="color: #BCBCBC;"> 2</span> 2        <span style="color: #949494;">"</span>TRUE<span style="color: #949494;">"</span>                Gender_MF         NDAM          alldeaths ~ d…</span>
<span class="co">## <span style="color: #BCBCBC;"> 3</span> 3        <span style="color: #949494;">"</span>TRUE<span style="color: #949494;">"</span>                Gender_MF         log(NDAM)     alldeaths ~ d…</span>
<span class="co">## <span style="color: #BCBCBC;"> 4</span> 4        <span style="color: #949494;">"</span>TRUE<span style="color: #949494;">"</span>                Gender_MF         log(NDAM)     alldeaths ~ d…</span>
<span class="co">## <span style="color: #BCBCBC;"> 5</span> 5        <span style="color: #949494;">"</span>TRUE<span style="color: #949494;">"</span>                MasFem            NDAM          alldeaths ~ d…</span>
<span class="co">## <span style="color: #BCBCBC;"> 6</span> 6        <span style="color: #949494;">"</span>TRUE<span style="color: #949494;">"</span>                MasFem            NDAM          alldeaths ~ d…</span>
<span class="co">## <span style="color: #BCBCBC;"> 7</span> 7        <span style="color: #949494;">"</span>TRUE<span style="color: #949494;">"</span>                MasFem            log(NDAM)     alldeaths ~ d…</span>
<span class="co">## <span style="color: #BCBCBC;"> 8</span> 8        <span style="color: #949494;">"</span>TRUE<span style="color: #949494;">"</span>                MasFem            log(NDAM)     alldeaths ~ d…</span>
<span class="co">## <span style="color: #BCBCBC;"> 9</span> 9        <span style="color: #949494;">"</span>Name != \"Katrina\"<span style="color: #949494;">"</span> Gender_MF         NDAM          alldeaths ~ d…</span>
<span class="co">## <span style="color: #BCBCBC;">10</span> 10       <span style="color: #949494;">"</span>Name != \"Katrina\"<span style="color: #949494;">"</span> Gender_MF         NDAM          alldeaths ~ d…</span>
<span class="co">## <span style="color: #949494;"># … with 14 more rows, and 1 more variable: distributions_branch &lt;fct&gt;</span></span></code></pre></div>
<p>Now, we have <span class="math inline">\(12 \times 2 = 24\)</span> different combinations.</p>
<p><code>multiverse_tree</code> can be used to view <code>hurricane_mv</code>. The tree below shows that <code>alldeaths</code> is modelled using both Gaussian and Poisson distributions.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/multiverse_tree.html">multiverse_tree</a></span><span class="op">(</span><span class="va">hurricane_mv</span>, label <span class="op">=</span> <span class="cn">TRUE</span>, branches <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"models"</span>, <span class="st">"distributions"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="mverse_intro_glmmodelling_files/figure-html/unnamed-chunk-8-1.png" width="1008"></p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/glm_mverse.html">glm_mverse</a></span><span class="op">(</span><span class="va">hurricane_mv</span><span class="op">)</span>

<span class="va">glm_summary</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/summary.html">summary</a></span><span class="op">(</span><span class="va">hurricane_mv</span><span class="op">)</span>

<span class="va">glm_summary</span>
<span class="co">## <span style="color: #949494;"># A tibble: 72 × 13</span></span>
<span class="co">##    universe death_outliers_branch femininity_branch damage_branch models_branch </span>
<span class="co">##    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>         </span>
<span class="co">## <span style="color: #BCBCBC;"> 1</span> 1        TRUE                  Gender_MF         NDAM          alldeaths ~ d…</span>
<span class="co">## <span style="color: #BCBCBC;"> 2</span> 1        TRUE                  Gender_MF         NDAM          alldeaths ~ d…</span>
<span class="co">## <span style="color: #BCBCBC;"> 3</span> 1        TRUE                  Gender_MF         NDAM          alldeaths ~ d…</span>
<span class="co">## <span style="color: #BCBCBC;"> 4</span> 2        TRUE                  Gender_MF         NDAM          alldeaths ~ d…</span>
<span class="co">## <span style="color: #BCBCBC;"> 5</span> 2        TRUE                  Gender_MF         NDAM          alldeaths ~ d…</span>
<span class="co">## <span style="color: #BCBCBC;"> 6</span> 2        TRUE                  Gender_MF         NDAM          alldeaths ~ d…</span>
<span class="co">## <span style="color: #BCBCBC;"> 7</span> 3        TRUE                  Gender_MF         log(NDAM)     alldeaths ~ d…</span>
<span class="co">## <span style="color: #BCBCBC;"> 8</span> 3        TRUE                  Gender_MF         log(NDAM)     alldeaths ~ d…</span>
<span class="co">## <span style="color: #BCBCBC;"> 9</span> 3        TRUE                  Gender_MF         log(NDAM)     alldeaths ~ d…</span>
<span class="co">## <span style="color: #BCBCBC;">10</span> 4        TRUE                  Gender_MF         log(NDAM)     alldeaths ~ d…</span>
<span class="co">## <span style="color: #949494;"># … with 62 more rows, and 8 more variables: distributions_branch &lt;fct&gt;,</span></span>
<span class="co">## <span style="color: #949494;">#   term &lt;chr&gt;, estimate &lt;dbl&gt;, std.error &lt;dbl&gt;, statistic &lt;dbl&gt;,</span></span>
<span class="co">## <span style="color: #949494;">#   p.value &lt;dbl&gt;, conf.low &lt;dbl&gt;, conf.high &lt;dbl&gt;</span></span></code></pre></div>
<p>Each model has three rows, each corresponding to a summary of a model coefficient.</p>
<p>The specification curve for the coefficient of <code>femininity</code> is shown below.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/spec_curve.html">spec_curve</a></span><span class="op">(</span><span class="va">hurricane_mv</span>, var <span class="op">=</span> <span class="st">"femininity"</span>, color_order <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p><img src="mverse_intro_glmmodelling_files/figure-html/unnamed-chunk-10-1.png" width="1008"></p>
</div>
<div class="section level3">
<h3 id="condition-branches">Condition Branches<a class="anchor" aria-label="anchor" href="#condition-branches"></a>
</h3>
<p>The assumption that <code>alldeaths</code> follows a Normal distribution is tenuous, but transforming the <code>alldeaths</code> using <span class="math inline">\(t(x)=\log(x+1)\)</span> could result in a dependent variable that is closer to a Normal distribution.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">hurricane</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>sample <span class="op">=</span> <span class="va">alldeaths</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_qq.html" class="external-link">stat_qq</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_qq.html" class="external-link">stat_qq_line</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="mverse_intro_glmmodelling_files/figure-html/unnamed-chunk-11-1.png" width="1008"></p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="va">hurricane</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>logd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">alldeaths</span><span class="op">+</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>sample <span class="op">=</span> <span class="va">logd</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_qq.html" class="external-link">stat_qq</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_qq.html" class="external-link">stat_qq_line</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="mverse_intro_glmmodelling_files/figure-html/unnamed-chunk-11-2.png" width="1008"></p>
<p>Let’s set up a similar multiverse analysis to the one above.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">hurricane_mv</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mverse.html">create_multiverse</a></span><span class="op">(</span><span class="va">hurricane</span><span class="op">)</span>

<span class="va">dep_var</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mutate_branch.html">mutate_branch</a></span><span class="op">(</span><span class="va">alldeaths</span>, <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">alldeaths</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span>

<span class="va">femininity</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mutate_branch.html">mutate_branch</a></span><span class="op">(</span>binary_gender <span class="op">=</span> <span class="va">Gender_MF</span>, 
                            cts_gender <span class="op">=</span> <span class="va">MasFem</span><span class="op">)</span>

<span class="va">damage</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mutate_branch.html">mutate_branch</a></span><span class="op">(</span>damage_orig <span class="op">=</span> <span class="va">NDAM</span>, 
                        damage_log <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">NDAM</span><span class="op">)</span><span class="op">)</span>

<span class="va">models</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/formula_branch.html">formula_branch</a></span><span class="op">(</span><span class="va">dep_var</span> <span class="op">~</span> <span class="va">damage</span> <span class="op">+</span> <span class="va">femininity</span><span class="op">)</span>

<span class="va">distributions</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/family_branch.html">family_branch</a></span><span class="op">(</span><span class="va">poisson</span>, <span class="va">gaussian</span><span class="op">)</span>

<span class="va">hurricane_mv</span> <span class="op">&lt;-</span> <span class="va">hurricane_mv</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="../reference/add_mutate_branch.html">add_mutate_branch</a></span><span class="op">(</span><span class="va">dep_var</span>, <span class="va">femininity</span>, <span class="va">damage</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="../reference/add_formula_branch.html">add_formula_branch</a></span><span class="op">(</span><span class="va">models</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="../reference/add_family_branch.html">add_family_branch</a></span><span class="op">(</span><span class="va">distributions</span><span class="op">)</span></code></pre></div>
<p>Using <code><a href="../reference/multiverse_tree.html">multiverse_tree()</a></code> to display the multiverse tree of <code>dep_var</code> and <code>distributions</code> shows that <code>log(alldeaths + 1)</code> and <code>alldeaths</code> will be modelled as both Gaussian and Poisson.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/multiverse_tree.html">multiverse_tree</a></span><span class="op">(</span><span class="va">hurricane_mv</span>, label <span class="op">=</span> <span class="cn">TRUE</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"dep_var"</span>, <span class="st">"distributions"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="mverse_intro_glmmodelling_files/figure-html/unnamed-chunk-13-1.png" width="1008"></p>
<p>In order to specify that <code>hurricane_mv</code> should only contain analyses where <code>log(alldeaths + 1)</code> is modelled using a Gaussian and <code>alldeaths</code> modelled using Poisson we can use <code><a href="../reference/branch_condition.html">branch_condition()</a></code> and <code><a href="../reference/add_branch_condition.html">add_branch_condition()</a></code> to add it to <code>hurricane_mv</code>.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">match_poisson</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/branch_condition.html">branch_condition</a></span><span class="op">(</span><span class="va">alldeaths</span>, <span class="va">poisson</span><span class="op">)</span>

<span class="va">match_log_lin</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/branch_condition.html">branch_condition</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">alldeaths</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span>, <span class="va">gaussian</span><span class="op">)</span>

<span class="va">hurricane_mv</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_branch_condition.html">add_branch_condition</a></span><span class="op">(</span><span class="va">hurricane_mv</span>, <span class="va">match_poisson</span>, <span class="va">match_log_lin</span><span class="op">)</span></code></pre></div>
<p>The multiverse tree shows that <code>log(alldeaths + 1)</code> will <em>only</em> be modelled as Gaussian and <code>alldeaths</code> will <em>only</em> be modelled as Poisson.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/multiverse_tree.html">multiverse_tree</a></span><span class="op">(</span><span class="va">hurricane_mv</span>, label <span class="op">=</span> <span class="cn">TRUE</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"dep_var"</span>, <span class="st">"distributions"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="mverse_intro_glmmodelling_files/figure-html/unnamed-chunk-15-1.png" width="1008"></p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/glm_mverse.html">glm_mverse</a></span><span class="op">(</span><span class="va">hurricane_mv</span><span class="op">)</span>

<span class="fu"><a href="../reference/summary.html">summary</a></span><span class="op">(</span><span class="va">hurricane_mv</span><span class="op">)</span>
<span class="co">## <span style="color: #949494;"># A tibble: 24 × 13</span></span>
<span class="co">##    universe femininity_branch damage_branch models_branch       distributions_b…</span>
<span class="co">##    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>           </span>
<span class="co">## <span style="color: #BCBCBC;"> 1</span> 1        Gender_MF         NDAM          dep_var ~ damage +… poisson         </span>
<span class="co">## <span style="color: #BCBCBC;"> 2</span> 1        Gender_MF         NDAM          dep_var ~ damage +… poisson         </span>
<span class="co">## <span style="color: #BCBCBC;"> 3</span> 1        Gender_MF         NDAM          dep_var ~ damage +… poisson         </span>
<span class="co">## <span style="color: #BCBCBC;"> 4</span> 2        Gender_MF         NDAM          dep_var ~ damage +… gaussian        </span>
<span class="co">## <span style="color: #BCBCBC;"> 5</span> 2        Gender_MF         NDAM          dep_var ~ damage +… gaussian        </span>
<span class="co">## <span style="color: #BCBCBC;"> 6</span> 2        Gender_MF         NDAM          dep_var ~ damage +… gaussian        </span>
<span class="co">## <span style="color: #BCBCBC;"> 7</span> 3        Gender_MF         log(NDAM)     dep_var ~ damage +… poisson         </span>
<span class="co">## <span style="color: #BCBCBC;"> 8</span> 3        Gender_MF         log(NDAM)     dep_var ~ damage +… poisson         </span>
<span class="co">## <span style="color: #BCBCBC;"> 9</span> 3        Gender_MF         log(NDAM)     dep_var ~ damage +… poisson         </span>
<span class="co">## <span style="color: #BCBCBC;">10</span> 4        Gender_MF         log(NDAM)     dep_var ~ damage +… gaussian        </span>
<span class="co">## <span style="color: #949494;"># … with 14 more rows, and 8 more variables: dep_var_branch &lt;fct&gt;, term &lt;chr&gt;,</span></span>
<span class="co">## <span style="color: #949494;">#   estimate &lt;dbl&gt;, std.error &lt;dbl&gt;, statistic &lt;dbl&gt;, p.value &lt;dbl&gt;,</span></span>
<span class="co">## <span style="color: #949494;">#   conf.low &lt;dbl&gt;, conf.high &lt;dbl&gt;</span></span></code></pre></div>
<p>A summary of the 24 models on the <code>femininity</code> coefficients is shown in the specification curve.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/spec_curve.html">spec_curve</a></span><span class="op">(</span><span class="va">hurricane_mv</span>, var <span class="op">=</span> <span class="st">"femininity"</span>, color_order <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p><img src="mverse_intro_glmmodelling_files/figure-html/unnamed-chunk-17-1.png" width="1008"></p>
</div>
<div class="section level3">
<h3 id="negative-binomial-regression">Negative Binomial Regression<a class="anchor" aria-label="anchor" href="#negative-binomial-regression"></a>
</h3>
<p><span class="citation">Jung et al. (2014)</span> used negative binomial regression to analyse the severity of female versus male hurricane names on number of deaths. In this section we will <code><a href="../reference/glm.nb_mverse.html">glm.nb_mverse()</a></code> to do a similar analysis.</p>
<p>First, let’s setup the multiverse of analyses.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">hurricane_nb_mv</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mverse.html">create_multiverse</a></span><span class="op">(</span><span class="va">hurricane</span><span class="op">)</span>

<span class="va">femininity</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mutate_branch.html">mutate_branch</a></span><span class="op">(</span>binary_gender <span class="op">=</span> <span class="va">Gender_MF</span>, 
                            cts_gender <span class="op">=</span> <span class="va">MasFem</span><span class="op">)</span>

<span class="va">damage</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mutate_branch.html">mutate_branch</a></span><span class="op">(</span>damage_orig <span class="op">=</span> <span class="va">NDAM</span>, 
                        damage_log <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">NDAM</span><span class="op">)</span><span class="op">)</span>

<span class="va">models</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/formula_branch.html">formula_branch</a></span><span class="op">(</span><span class="va">alldeaths</span> <span class="op">~</span> <span class="va">damage</span> <span class="op">+</span> <span class="va">femininity</span><span class="op">)</span>

<span class="va">hurricane_nb_mv</span> <span class="op">&lt;-</span> <span class="va">hurricane_nb_mv</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="../reference/add_mutate_branch.html">add_mutate_branch</a></span><span class="op">(</span><span class="va">femininity</span>, <span class="va">damage</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="../reference/add_formula_branch.html">add_formula_branch</a></span><span class="op">(</span><span class="va">models</span><span class="op">)</span> </code></pre></div>
<p>A summary of <code>hurricane_nb_mv</code> shows the four models in the multiverse.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/summary.html">summary</a></span><span class="op">(</span><span class="va">hurricane_nb_mv</span><span class="op">)</span>
<span class="co">## <span style="color: #949494;"># A tibble: 4 × 4</span></span>
<span class="co">##   universe femininity_branch damage_branch models_branch                  </span>
<span class="co">##   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>                          </span>
<span class="co">## <span style="color: #BCBCBC;">1</span> 1        Gender_MF         NDAM          alldeaths ~ damage + femininity</span>
<span class="co">## <span style="color: #BCBCBC;">2</span> 2        Gender_MF         log(NDAM)     alldeaths ~ damage + femininity</span>
<span class="co">## <span style="color: #BCBCBC;">3</span> 3        MasFem            NDAM          alldeaths ~ damage + femininity</span>
<span class="co">## <span style="color: #BCBCBC;">4</span> 4        MasFem            log(NDAM)     alldeaths ~ damage + femininity</span></code></pre></div>
<p>Next, use <code><a href="../reference/glm.nb_mverse.html">glm.nb_mverse()</a></code> to fit the negative binomial regressions.</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/glm.nb_mverse.html">glm.nb_mverse</a></span><span class="op">(</span><span class="va">hurricane_nb_mv</span><span class="op">)</span>

<span class="fu"><a href="../reference/summary.html">summary</a></span><span class="op">(</span><span class="va">hurricane_nb_mv</span><span class="op">)</span>
<span class="co">## <span style="color: #949494;"># A tibble: 12 × 11</span></span>
<span class="co">##    universe femininity_branch damage_branch models_branch         term  estimate</span>
<span class="co">##    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 1</span> 1        Gender_MF         NDAM          alldeaths ~ damage +… (Int…  1.71<span style="color: #949494;">e</span>+0</span>
<span class="co">## <span style="color: #BCBCBC;"> 2</span> 1        Gender_MF         NDAM          alldeaths ~ damage +… dama…  9.81<span style="color: #949494;">e</span><span style="color: #BB0000;">-5</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 3</span> 1        Gender_MF         NDAM          alldeaths ~ damage +… femi…  2.27<span style="color: #949494;">e</span><span style="color: #BB0000;">-1</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 4</span> 2        Gender_MF         log(NDAM)     alldeaths ~ damage +… (Int… -<span style="color: #BB0000;">1.96</span><span style="color: #949494;">e</span>+0</span>
<span class="co">## <span style="color: #BCBCBC;"> 5</span> 2        Gender_MF         log(NDAM)     alldeaths ~ damage +… dama…  5.77<span style="color: #949494;">e</span><span style="color: #BB0000;">-1</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 6</span> 2        Gender_MF         log(NDAM)     alldeaths ~ damage +… femi…  1.08<span style="color: #949494;">e</span><span style="color: #BB0000;">-1</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 7</span> 3        MasFem            NDAM          alldeaths ~ damage +… (Int…  1.66<span style="color: #949494;">e</span>+0</span>
<span class="co">## <span style="color: #BCBCBC;"> 8</span> 3        MasFem            NDAM          alldeaths ~ damage +… dama…  9.83<span style="color: #949494;">e</span><span style="color: #BB0000;">-5</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 9</span> 3        MasFem            NDAM          alldeaths ~ damage +… femi…  3.04<span style="color: #949494;">e</span><span style="color: #BB0000;">-2</span></span>
<span class="co">## <span style="color: #BCBCBC;">10</span> 4        MasFem            log(NDAM)     alldeaths ~ damage +… (Int… -<span style="color: #BB0000;">2.05</span><span style="color: #949494;">e</span>+0</span>
<span class="co">## <span style="color: #BCBCBC;">11</span> 4        MasFem            log(NDAM)     alldeaths ~ damage +… dama…  5.76<span style="color: #949494;">e</span><span style="color: #BB0000;">-1</span></span>
<span class="co">## <span style="color: #BCBCBC;">12</span> 4        MasFem            log(NDAM)     alldeaths ~ damage +… femi…  2.40<span style="color: #949494;">e</span><span style="color: #BB0000;">-2</span></span>
<span class="co">## <span style="color: #949494;"># … with 5 more variables: std.error &lt;dbl&gt;, statistic &lt;dbl&gt;, p.value &lt;dbl&gt;,</span></span>
<span class="co">## <span style="color: #949494;">#   conf.low &lt;dbl&gt;, conf.high &lt;dbl&gt;</span></span></code></pre></div>
<p>Finally, we can plot the specification curve.</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/spec_curve.html">spec_curve</a></span><span class="op">(</span><span class="va">hurricane_nb_mv</span>, var <span class="op">=</span> <span class="st">"femininity"</span>, color_order <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p><img src="mverse_intro_glmmodelling_files/figure-html/unnamed-chunk-21-1.png" width="1008"></p>
<div id="refs" class="references">
<div id="ref-original">
<p>Jung, Kiju, Sharon Shavitt, Madhu Viswanathan, and Joseph M. Hilbe. 2014. “Female Hurricanes Are Deadlier Than Male Hurricanes” 111 (24): 8782–7. <a href="https://doi.org/10.1073/pnas.1402786111" class="external-link">https://doi.org/10.1073/pnas.1402786111</a>.</p>
</div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Michael Jongho Moon, Haoda Li, Mingwei Xu, Nathan Taback, Fanny Chevalier.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
