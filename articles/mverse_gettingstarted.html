<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Getting started with mverse • mverse</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Getting started with mverse">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">mverse</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="divider">
    </li>
<li class="dropdown-header">Examples</li>
    <li>
      <a href="../articles/mverse_gettingstarted.html">Getting started with mverse</a>
    </li>
    <li>
      <a href="../articles/mverse_intro_glmmodelling.html">GLM Modelling with mverse</a>
    </li>
    <li>
      <a href="../articles/mverse_intro_regressionmodelling.html">Basic Regressions with mverse</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/mverseanalysis/mverse/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Getting started with mverse</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/mverseanalysis/mverse/blob/master/vignettes/mverse_gettingstarted.Rmd" class="external-link"><code>vignettes/mverse_gettingstarted.Rmd</code></a></small>
      <div class="hidden name"><code>mverse_gettingstarted.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="simple-example-transform-and-summarise-one-numeric-column">Simple Example: Transform and Summarise One Numeric Column<a class="anchor" aria-label="anchor" href="#simple-example-transform-and-summarise-one-numeric-column"></a>
</h2>
<p>Suppose that we have a column <code>col1</code> that we wish to
transform in three different ways and compute the five number summary of
the column after the transformations.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/mverseanalysis/mverse/" class="external-link">mverse</a></span><span class="op">)</span></span>
<span><span class="co">## Loading required package: multiverse</span></span>
<span><span class="co">## Loading required package: knitr</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Attaching package: 'mverse'</span></span>
<span><span class="co">## The following object is masked from 'package:multiverse':</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##     execute_multiverse</span></span>
<span><span class="co">## The following objects are masked from 'package:stats':</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##     AIC, BIC</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/" class="external-link">tibble</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Attaching package: 'dplyr'</span></span>
<span><span class="co">## The following objects are masked from 'package:stats':</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##     filter, lag</span></span>
<span><span class="co">## The following objects are masked from 'package:base':</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##     intersect, setdiff, setequal, union</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">6</span><span class="op">)</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>col1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>, col2 <span class="op">=</span> <span class="va">col1</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">5</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="step-1-create_multiverse-of-the-data-frame">Step 1: <code>create_multiverse</code> of the data frame<a class="anchor" aria-label="anchor" href="#step-1-create_multiverse-of-the-data-frame"></a>
</h3>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mv</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mverse.html">create_multiverse</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="step-2-mutate_branch-to-transform-col1">Step 2: <code>mutate_branch</code> to transform
<code>col1</code><a class="anchor" aria-label="anchor" href="#step-2-mutate_branch-to-transform-col1"></a>
</h3>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Step 2: create a branch - each branch corresponds to a universe</span></span>
<span></span>
<span><span class="va">transformation_branch</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mutate_branch.html">mutate_branch</a></span><span class="op">(</span>col1 <span class="op">=</span> <span class="va">col1</span>,</span>
<span>                                       col1_t1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="va">col1</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                                       col1_t2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="va">col1</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="step-3-add_mutate_branch-to-mv">Step 3: <code>add_mutate_branch</code> to <code>mv</code><a class="anchor" aria-label="anchor" href="#step-3-add_mutate_branch-to-mv"></a>
</h3>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mv</span> <span class="op">&lt;-</span> <span class="va">mv</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/add_mutate_branch.html">add_mutate_branch</a></span><span class="op">(</span><span class="va">transformation_branch</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="step-4-execute_multiverse-to-execute-the-transformations">Step 4: <code>execute_multiverse</code> to execute the
transformations<a class="anchor" aria-label="anchor" href="#step-4-execute_multiverse-to-execute-the-transformations"></a>
</h3>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mv</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/execute_multiverse.html">execute_multiverse</a></span><span class="op">(</span><span class="va">mv</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="step-5-extract-transformed-values-from-mv">Step 5: Extract Transformed Values from <code>mv</code><a class="anchor" aria-label="anchor" href="#step-5-extract-transformed-values-from-mv"></a>
</h3>
<p><code>extract</code> to add the column to <code>df_transformed</code>
that labels transformations.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_transformed</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/extract.html">extract</a></span><span class="op">(</span><span class="va">mv</span><span class="op">)</span></span>
<span></span>
<span><span class="va">df_transformed</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">## <span style="color: #949494;"># A tibble: 6 × 3</span></span></span>
<span><span class="co">##   universe transformation_branch transformation_branch_branch</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>                    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>                       </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> 1                       0.270  col1                        </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> 1                      -<span style="color: #BB0000;">0.630</span>  col1                        </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span> 1                       0.869  col1                        </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span> 1                       1.73   col1                        </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">5</span> 1                       0.024<span style="text-decoration: underline;">2</span> col1                        </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">6</span> 2                       0.239  col1_t1</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="step-5-use-tidyverse-to-compute-the-summary-and-plot-the-distribution-of-each-transformation-universe">Step 5: use <code>tidyverse</code> to compute the summary and plot
the distribution of each transformation (universe)<a class="anchor" aria-label="anchor" href="#step-5-use-tidyverse-to-compute-the-summary-and-plot-the-distribution-of-each-transformation-universe"></a>
</h3>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_transformed</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">transformation_branch_branch</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>            mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">transformation_branch</span><span class="op">)</span>,</span>
<span>            sd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html" class="external-link">sd</a></span><span class="op">(</span><span class="va">transformation_branch</span><span class="op">)</span>,</span>
<span>            median <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html" class="external-link">median</a></span><span class="op">(</span><span class="va">transformation_branch</span><span class="op">)</span>,</span>
<span>            IQR <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/IQR.html" class="external-link">IQR</a></span><span class="op">(</span><span class="va">transformation_branch</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">## <span style="color: #949494;"># A tibble: 3 × 6</span></span></span>
<span><span class="co">##   transformation_branch_branch     n  mean    sd median   IQR</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>                        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> col1                             5 0.452 0.893  0.270 0.844</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> col1_t1                          5 0.179 0.755  0.239 0.601</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span> col1_t2                          5 0.704 0.658  0.630 0.599</span></span>
<span></span>
<span><span class="va">df_transformed</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">transformation_branch</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html" class="external-link">geom_histogram</a></span><span class="op">(</span>bins <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">transformation_branch_branch</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="mverse_gettingstarted_files/figure-html/unnamed-chunk-8-1.png" width="2100"></p>
</div>
</div>
<div class="section level2">
<h2 id="simple-example-using-mverse-to-fit-three-simple-linear-regression-of-a-transformed-column">Simple Example: Using <code>mverse</code> to Fit Three Simple Linear
Regression of a Transformed Column<a class="anchor" aria-label="anchor" href="#simple-example-using-mverse-to-fit-three-simple-linear-regression-of-a-transformed-column"></a>
</h2>
<div class="section level3">
<h3 id="step-1-create_multiverse-of-the-data-frame-1">Step 1: <code>create_multiverse</code> of the data frame<a class="anchor" aria-label="anchor" href="#step-1-create_multiverse-of-the-data-frame-1"></a>
</h3>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mv1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mverse.html">create_multiverse</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="step-2-create-formula_branch-of-the-linear-regression-models">Step 2: Create <code>formula_branch</code> of the linear regression
models<a class="anchor" aria-label="anchor" href="#step-2-create-formula_branch-of-the-linear-regression-models"></a>
</h3>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">formulas</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/formula_branch.html">formula_branch</a></span><span class="op">(</span><span class="va">col2</span> <span class="op">~</span> <span class="va">col1</span>,</span>
<span>                           <span class="va">col2</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="va">col1</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                           <span class="va">col2</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="va">col1</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="step-3-add_formula_branch-to-multiverse-of-data-frame">Step 3: <code>add_formula_branch</code> to multiverse of data
frame<a class="anchor" aria-label="anchor" href="#step-3-add_formula_branch-to-multiverse-of-data-frame"></a>
</h3>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mv1</span> <span class="op">&lt;-</span> <span class="va">mv1</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/add_formula_branch.html">add_formula_branch</a></span><span class="op">(</span><span class="va">formulas</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="step-3-lm_mverse-to-compute-linear-regression-models-across-the-multiverse">Step 3: <code>lm_mverse</code> to compute linear regression models
across the multiverse<a class="anchor" aria-label="anchor" href="#step-3-lm_mverse-to-compute-linear-regression-models-across-the-multiverse"></a>
</h3>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/lm_mverse.html">lm_mverse</a></span><span class="op">(</span><span class="va">mv1</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="step-4-use-summary-to-extract-regression-output">Step 4: Use <code>summary</code> to extract regression output<a class="anchor" aria-label="anchor" href="#step-4-use-summary-to-extract-regression-output"></a>
</h3>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/summary.html">summary</a></span><span class="op">(</span><span class="va">mv1</span><span class="op">)</span></span>
<span><span class="co">## <span style="color: #949494;"># A tibble: 6 × 10</span></span></span>
<span><span class="co">##   universe formulas_branch term    estimate std.error statistic p.value conf.low</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> 1        formulas_1      (Inter…    0.689     0.109      6.31 0.008<span style="text-decoration: underline;">03</span>   0.342 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> 1        formulas_1      col1       0.680     0.119      5.71 0.010<span style="text-decoration: underline;">6</span>    0.301 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span> 2        formulas_2      (Inter…    0.863     0.159      5.43 0.012<span style="text-decoration: underline;">2</span>    0.358 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span> 2        formulas_2      log(ab…    0.741     0.227      3.26 0.047<span style="text-decoration: underline;">1</span>    0.017<span style="text-decoration: underline;">8</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">5</span> 3        formulas_3      (Inter…    0.479     0.330      1.45 0.243    -<span style="color: #BB0000;">0.573</span> </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">6</span> 3        formulas_3      abs(co…    0.734     0.360      2.04 0.134    -<span style="color: #BB0000;">0.412</span> </span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 2 more variables: conf.high &lt;dbl&gt;, formulas_branch_code &lt;fct&gt;</span></span></span></code></pre></div>
<p>Let’s compare using <code>mverse</code> to using
<code>tidyverse</code> and base R to fit the three models.</p>
<p>One way to do this using <code>tidyverse</code> is to create a list
of the model formulas then map the list to <code>lm</code>.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mod1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/formula.html" class="external-link">formula</a></span><span class="op">(</span><span class="va">col2</span> <span class="op">~</span> <span class="va">col1</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mod2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/formula.html" class="external-link">formula</a></span><span class="op">(</span><span class="va">col2</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="va">col1</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mod3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/formula.html" class="external-link">formula</a></span><span class="op">(</span><span class="va">col2</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="va">col1</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">models</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">mod1</span>, <span class="va">mod2</span>, <span class="va">mod3</span><span class="op">)</span></span>
<span></span>
<span><span class="va">models</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span><span class="va">lm</span>, data <span class="op">=</span> <span class="va">df</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span><span class="fu">broom</span><span class="fu">::</span><span class="va"><a href="https://generics.r-lib.org/reference/tidy.html" class="external-link">tidy</a></span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">## <span style="color: #949494;"># A tibble: 6 × 5</span></span></span>
<span><span class="co">##   term               estimate std.error statistic p.value</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> (Intercept)           0.689     0.109      6.31 0.008<span style="text-decoration: underline;">03</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> col1                  0.680     0.119      5.71 0.010<span style="text-decoration: underline;">6</span> </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span> (Intercept)           0.863     0.159      5.43 0.012<span style="text-decoration: underline;">2</span> </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span> log(abs(col1 + 1))    0.741     0.227      3.26 0.047<span style="text-decoration: underline;">1</span> </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">5</span> (Intercept)           0.479     0.330      1.45 0.243  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">6</span> abs(col1)             0.734     0.360      2.04 0.134</span></span></code></pre></div>
<p>Using base R we can use <code>lappy</code> instead of</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">modfit</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">models</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">x</span>, data <span class="op">=</span> <span class="va">df</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">modfit</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="../reference/summary.html">summary</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">[</span><span class="fl">4</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">## [[1]]</span></span>
<span><span class="co">## [[1]]$coefficients</span></span>
<span><span class="co">##              Estimate Std. Error  t value    Pr(&gt;|t|)</span></span>
<span><span class="co">## (Intercept) 0.6888352  0.1090963 6.314013 0.008029051</span></span>
<span><span class="co">## col1        0.6795288  0.1189216 5.714092 0.010634165</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## [[2]]</span></span>
<span><span class="co">## [[2]]$coefficients</span></span>
<span><span class="co">##                     Estimate Std. Error  t value   Pr(&gt;|t|)</span></span>
<span><span class="co">## (Intercept)        0.8630266  0.1588415 5.433258 0.01223797</span></span>
<span><span class="co">## log(abs(col1 + 1)) 0.7409497  0.2272193 3.260945 0.04709792</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## [[3]]</span></span>
<span><span class="co">## [[3]]$coefficients</span></span>
<span><span class="co">##              Estimate Std. Error  t value  Pr(&gt;|t|)</span></span>
<span><span class="co">## (Intercept) 0.4789365  0.3303897 1.449611 0.2430335</span></span>
<span><span class="co">## abs(col1)   0.7344512  0.3601450 2.039321 0.1341343</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="are-soccer-referees-biased">Are Soccer Referees Biased?<a class="anchor" aria-label="anchor" href="#are-soccer-referees-biased"></a>
</h2>
<p>In this example, we use a real dataset that demonstrates how
<code>mverse</code> makes it easy to define multiple definitions for a
column and compare the results of the different definitions. We combine
soccer player skin colour ratings by two independent raters
(<code>rater1</code> and <code>rater2</code>) from <code>soccer</code>
dataset included in <code>mverse</code>.</p>
<p>The data comes from <span class="citation">Silberzahn et al. (<a href="#ref-datasrc">2014</a>)</span> and contains 146,028 rows of
player-referee pairs. For each player, two independent raters coded
their skin tones on a 5-point scale ranging from <em>very light
skin</em> (<code>0.0</code>) to <em>very dark skin</em>
(<code>1.0</code>). For the purpose of demonstration, we only use a
unique record per player and consider only those with both ratings.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/mverseanalysis/mverse/" class="external-link">mverse</a></span><span class="op">)</span></span>
<span><span class="va">soccer_bias</span> <span class="op">&lt;-</span> <span class="va">soccer</span><span class="op">[</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">soccer</span><span class="op">$</span><span class="va">rater1</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">soccer</span><span class="op">$</span><span class="va">rater2</span><span class="op">)</span>,</span>
<span>                      <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"playerShort"</span>, <span class="st">"rater1"</span>, <span class="st">"rater2"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">soccer_bias</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">soccer_bias</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">soccer_bias</span><span class="op">)</span></span>
<span><span class="co">##          playerShort rater1 rater2</span></span>
<span><span class="co">## 1      lucas-wilchez   0.25   0.50</span></span>
<span><span class="co">## 2         john-utaka   0.75   0.75</span></span>
<span><span class="co">## 6       aaron-hughes   0.25   0.00</span></span>
<span><span class="co">## 7 aleksandar-kolarov   0.00   0.25</span></span>
<span><span class="co">## 8   alexander-tettey   1.00   1.00</span></span>
<span><span class="co">## 9  anders-lindegaard   0.25   0.25</span></span></code></pre></div>
<p>We would like to study the distribution of the player skin tones but
the two independent rating do not always match. To combine the two
ratings, we may choose to consider the following options:</p>
<ol style="list-style-type: decimal">
<li>the mean numeric value</li>
<li>the darker rating of the two</li>
<li>the lighter rating of the two</li>
<li>the first rating only</li>
<li>the second rating only</li>
</ol>
</div>
<div class="section level2">
<h2 id="analysis-using-base-r-and-tidyverse">Analysis using Base R and <code>Tidyverse</code><a class="anchor" aria-label="anchor" href="#analysis-using-base-r-and-tidyverse"></a>
</h2>
<p>Let’s first consider how you might study the five options using R
without <code>mverse</code>. First, we define the five options as
separate variables in R.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">skin_option_1</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="va">soccer_bias</span><span class="op">$</span><span class="va">rater1</span> <span class="op">+</span> <span class="va">soccer_bias</span><span class="op">$</span><span class="va">rater2</span><span class="op">)</span> <span class="op">/</span> <span class="fl">2</span></span>
<span><span class="va">skin_option_2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">soccer_bias</span><span class="op">$</span><span class="va">rater1</span> <span class="op">&gt;</span> <span class="va">soccer_bias</span><span class="op">$</span><span class="va">rater2</span>,</span>
<span>                        <span class="va">soccer_bias</span><span class="op">$</span><span class="va">rater1</span>,</span>
<span>                        <span class="va">soccer_bias</span><span class="op">$</span><span class="va">rater2</span><span class="op">)</span></span>
<span><span class="va">skin_option_3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">soccer_bias</span><span class="op">$</span><span class="va">rater1</span> <span class="op">&lt;</span> <span class="va">soccer_bias</span><span class="op">$</span><span class="va">rater2</span>,</span>
<span>                        <span class="va">soccer_bias</span><span class="op">$</span><span class="va">rater1</span>,</span>
<span>                        <span class="va">soccer_bias</span><span class="op">$</span><span class="va">rater2</span><span class="op">)</span></span>
<span><span class="va">skin_option_4</span> <span class="op">&lt;-</span> <span class="va">soccer_bias</span><span class="op">$</span><span class="va">rater1</span></span>
<span><span class="va">skin_option_5</span> <span class="op">&lt;-</span> <span class="va">soccer_bias</span><span class="op">$</span><span class="va">rater2</span></span></code></pre></div>
<p>We can plot a histogram to study the distribution of the resulting
skin tone value for each option. Below is the histogram for the first
option (<code>skin_option_1</code>).</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">skin_option_1</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html" class="external-link">geom_histogram</a></span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">0.2</span><span class="op">)</span>,</span>
<span>                 colour <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Histogram of player skin tones (Option 1: Mean)."</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Skin Tone"</span>, y <span class="op">=</span> <span class="st">"Count"</span><span class="op">)</span></span></code></pre></div>
<p><img src="mverse_gettingstarted_files/figure-html/hist_base-1.png" width="2100"></p>
<p>For the remaining four options, we can repeat the step above to
examine the distributions, or create a new data frame combining all five
options to use in a ggplot as shown below. In both cases, users need to
take care of plotting all five manually.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">skin_option_all</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">skin_option_1</span>,</span>
<span>        <span class="va">skin_option_2</span>,</span>
<span>        <span class="va">skin_option_3</span>,</span>
<span>        <span class="va">skin_option_4</span>,</span>
<span>        <span class="va">skin_option_5</span><span class="op">)</span>,</span>
<span>  Option <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Option 1: Mean"</span>,</span>
<span>      <span class="st">"Option 2: Max"</span>,</span>
<span>      <span class="st">"Option 3: Min"</span>,</span>
<span>      <span class="st">"Option 4: Rater 1"</span>,</span>
<span>      <span class="st">"Option 5: Rater 2"</span><span class="op">)</span>,</span>
<span>    each <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">skin_option_all</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html" class="external-link">geom_histogram</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span><span class="op">)</span>, binwidth <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Histogram of player skin tones for each option."</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Skin Tone"</span>, y <span class="op">=</span> <span class="st">"Count"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="va">.</span> <span class="op">~</span> <span class="va">Option</span><span class="op">)</span></span></code></pre></div>
<p><img src="mverse_gettingstarted_files/figure-html/hist_base_overlaid-1.png" width="2100"></p>
</div>
<div class="section level2">
<h2 id="analysis-using-mverse">Analysis Using <code>mverse</code><a class="anchor" aria-label="anchor" href="#analysis-using-mverse"></a>
</h2>
<div class="section level3">
<h3 id="branching-using-mverse">Branching Using <code>mverse</code><a class="anchor" aria-label="anchor" href="#branching-using-mverse"></a>
</h3>
<p>We now turn to <code>mverse</code> to create the five options above.
First, we define an <code>mverse</code> object with the dataset. Note
that <code>mverse</code> assumes a single dataset for each multiverse
analysis.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">soccer_bias_mv</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mverse.html">create_multiverse</a></span><span class="op">(</span><span class="va">soccer_bias</span><span class="op">)</span></span></code></pre></div>
<p>A <em>branch</em> in <code>mverse</code> refers to different
modelling or data wrangling decisions. For example, a mutate branch -
analogous to <code>mutate</code> method in <code>tidyverse</code>’s data
manipulation grammar, lets you define a set of options for defining a
new column in your dataset.</p>
<p>You can create a mutate branch with <code><a href="../reference/mutate_branch.html">mutate_branch()</a></code>. The
syntax for defining the options inside <code><a href="../reference/mutate_branch.html">mutate_branch()</a></code>
follows the <code>tidyverse</code>’s grammar as well.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">skin_tone</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mutate_branch.html">mutate_branch</a></span><span class="op">(</span></span>
<span>  <span class="op">(</span><span class="va">rater1</span> <span class="op">+</span> <span class="va">rater2</span><span class="op">)</span> <span class="op">/</span> <span class="fl">2</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">rater1</span> <span class="op">&gt;</span> <span class="va">rater2</span>, <span class="va">rater1</span>, <span class="va">rater2</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">rater1</span> <span class="op">&lt;</span> <span class="va">rater2</span>, <span class="va">rater1</span>, <span class="va">rater2</span><span class="op">)</span>,</span>
<span>  <span class="va">rater1</span>,</span>
<span>  <span class="va">rater2</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Then add the newly defined mutate branch to the <code>mv</code>
object using <code><a href="../reference/add_mutate_branch.html">add_mutate_branch()</a></code>.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">soccer_bias_mv</span> <span class="op">&lt;-</span> <span class="va">soccer_bias_mv</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/add_mutate_branch.html">add_mutate_branch</a></span><span class="op">(</span><span class="va">skin_tone</span><span class="op">)</span></span></code></pre></div>
<p>Adding a branch to a <code>mverse</code> object multiplies the number
of environments defined inside the object so that the environments
capture all unique analysis paths. Without any branches, a
<code>mverse</code> object has a single environment. We call these
environments <em>universes</em>. For example, adding the
<code>skin_tone</code> mutate branch to <code>mv</code> results in
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>×</mo><mn>5</mn><mo>=</mo><mn>5</mn></mrow><annotation encoding="application/x-tex">1 \times 5 = 5</annotation></semantics></math>
universes inside <code>mv</code>. In each universe, the analysis dataset
now has a new column named <code>skin_tone</code> - the name of the
mutate branch object.</p>
<p>You can check that the mutate branch was added with
<code><a href="../reference/summary.html">summary()</a></code> method for the <code>mv</code> object. The method
prints a <em>multiverse table</em> that lists all universes with
branches as columns and corresponding options as values defined in the
<code>mv</code> object.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/summary.html">summary</a></span><span class="op">(</span><span class="va">soccer_bias_mv</span><span class="op">)</span></span>
<span><span class="co">## <span style="color: #949494;"># A tibble: 5 × 3</span></span></span>
<span><span class="co">##   universe skin_tone_branch skin_tone_branch_code                  </span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>                                  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> 1        skin_tone_1      (rater1 + rater2)/2                    </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> 2        skin_tone_2      ifelse(rater1 &gt; rater2, rater1, rater2)</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span> 3        skin_tone_3      ifelse(rater1 &lt; rater2, rater1, rater2)</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span> 4        skin_tone_4      rater1                                 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">5</span> 5        skin_tone_5      rater2</span></span></code></pre></div>
<p>At this point, the values of the new column <code>skin_tone</code>
are only populated in the first universe. To populate the values for all
universes, we call <code>execute_multiverse</code>.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/execute_multiverse.html">execute_multiverse</a></span><span class="op">(</span><span class="va">soccer_bias_mv</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="summarizing-the-distribution-of-each-branch-option">Summarizing The Distribution Of Each Branch Option<a class="anchor" aria-label="anchor" href="#summarizing-the-distribution-of-each-branch-option"></a>
</h3>
<p>In this section, we now examine and compare the distributions of
<code>skin_tone</code> values between different options. You can extract
the values in each universe using <code><a href="../reference/extract.html">extract()</a></code>. By default,
the method returns all columns created by a mutate branch across all
universes. In this example, we only have one column -
<code>skin_tone</code>.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">branched</span> <span class="op">&lt;-</span> <span class="fu">mverse</span><span class="fu">::</span><span class="fu"><a href="../reference/extract.html">extract</a></span><span class="op">(</span><span class="va">soccer_bias_mv</span><span class="op">)</span></span></code></pre></div>
<p><code>branched</code> is a dataset with <code>skin_tone</code>
values. If we want to extract the <code>skin_tone</code> values that
were computed using the average of the two raters then we can filter
<code>branched</code> by <code>skin_tone_branch</code> values equal to
<code>(rater1 + rater2) / 2</code>. Alternatively, we could filter by
<code>universe == 1</code>.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">branched</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">skin_tone_branch</span> <span class="op">==</span> <span class="st">"(rater1 + rater2) / 2"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">## [1] universe         skin_tone        skin_tone_branch</span></span>
<span><span class="co">## &lt;0 rows&gt; (or 0-length row.names)</span></span></code></pre></div>
<p>The distribution of each method for calculating skin tone can be
computed by grouping the levels of <code>skin_tone_branch</code>.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">branched</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">skin_tone_branch</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>            mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">skin_tone</span><span class="op">)</span>,</span>
<span>            sd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html" class="external-link">sd</a></span><span class="op">(</span><span class="va">skin_tone</span><span class="op">)</span>,</span>
<span>            median <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html" class="external-link">median</a></span><span class="op">(</span><span class="va">skin_tone</span><span class="op">)</span>,</span>
<span>            IQR <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/IQR.html" class="external-link">IQR</a></span><span class="op">(</span><span class="va">skin_tone</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">## <span style="color: #949494;"># A tibble: 5 × 6</span></span></span>
<span><span class="co">##   skin_tone_branch     n  mean    sd median   IQR</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> skin_tone_1       <span style="text-decoration: underline;">1</span>585 0.290 0.291   0.25 0.375</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> skin_tone_2       <span style="text-decoration: underline;">1</span>585 0.320 0.297   0.25 0.5  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span> skin_tone_3       <span style="text-decoration: underline;">1</span>585 0.259 0.295   0.25 0.25 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span> skin_tone_4       <span style="text-decoration: underline;">1</span>585 0.269 0.297   0.25 0.5  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">5</span> skin_tone_5       <span style="text-decoration: underline;">1</span>585 0.310 0.297   0.25 0.5</span></span></code></pre></div>
<p>Selecting a random subset of rows data is useful when the multiverse
is large. The <code>frow</code> parameter in <code><a href="../reference/extract.html">extract()</a></code>
provides the option to extract a random subset of rows in each universe.
It takes a value between 0 and 1 that represent the fraction of values
to extract from each universe. For example, setting
<code>frow = 0.05</code> returns approximately 5% of values from each
universe (i.e., <code>skin_tone_branch</code> in this case).</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">frac</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/extract.html">extract</a></span><span class="op">(</span><span class="va">soccer_bias_mv</span>, frow <span class="op">=</span>  <span class="fl">0.05</span><span class="op">)</span></span></code></pre></div>
<p>So, each universe is a 20% of the random sample.</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">frac</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">universe</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">tally</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>percent <span class="op">=</span> <span class="op">(</span><span class="va">n</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op">*</span> <span class="fl">100</span><span class="op">)</span></span>
<span><span class="co">## <span style="color: #949494;"># A tibble: 5 × 3</span></span></span>
<span><span class="co">##   universe     n percent</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> 1           79      20</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> 2           79      20</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span> 3           79      20</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span> 4           79      20</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">5</span> 5           79      20</span></span></code></pre></div>
<p>Finally, we can construct plots to compare the distributions of
<code>skin_tone</code> in different universes. For example, you can
overlay density lines on a single plot.</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">branched</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">skin_tone</span>, color <span class="op">=</span> <span class="va">universe</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_density.html" class="external-link">geom_density</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Density of player skin tones for each option."</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Skin Tone"</span>, y <span class="op">=</span> <span class="st">"Density"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_colour_discrete.html" class="external-link">scale_color_discrete</a></span><span class="op">(</span></span>
<span>    labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Option 1: Mean"</span>,</span>
<span>               <span class="st">"Option 2: Max"</span>,</span>
<span>               <span class="st">"Option 3: Min"</span>,</span>
<span>               <span class="st">"Option 4: Rater 1"</span>,</span>
<span>               <span class="st">"Option 5: Rater 2"</span><span class="op">)</span>,</span>
<span>    name <span class="op">=</span> <span class="cn">NULL</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><img src="mverse_gettingstarted_files/figure-html/compare_universe-1.png" width="2100"></p>
<p>Another option is the use <code>ggplot</code>’s
<code>facet_grid</code> function to generate multiple plots in a grid.
<code>facet_wrap(. ~ universe)</code> generates individual plots for
each universe.</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">branched</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">skin_tone</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html" class="external-link">geom_histogram</a></span><span class="op">(</span>position <span class="op">=</span> <span class="st">"dodge"</span>, bins <span class="op">=</span> <span class="fl">21</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Histogram of player skin tones for each option."</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Count"</span>, x <span class="op">=</span> <span class="st">"Skin Tone"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span></span>
<span>    <span class="va">.</span> <span class="op">~</span> <span class="va">universe</span>,</span>
<span>    labeller <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labeller.html" class="external-link">labeller</a></span><span class="op">(</span></span>
<span>      universe <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>`1` <span class="op">=</span> <span class="st">"Option 1: Mean"</span>,</span>
<span>                   `2` <span class="op">=</span> <span class="st">"Option 2: Max"</span>,</span>
<span>                   `3` <span class="op">=</span> <span class="st">"Option 3: Min"</span>,</span>
<span>                   `4` <span class="op">=</span> <span class="st">"Option 4: Rater 1"</span>,</span>
<span>                   `5` <span class="op">=</span> <span class="st">"Option 5: Rater 2"</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><img src="mverse_gettingstarted_files/figure-html/compare_universe_hist-1.png" width="2100"></p>
</div>
</div>
<div class="section level2 unnumbered">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-datasrc" class="csl-entry">
Silberzahn, Raphael, Eric Luis Uhlmann, Dan Martin, Pasquale Anselmi,
Frederik Aust, Eli C. Awtrey, Štěpán Bahník, et al. 2014. <span>“Many
Analysts, One Dataset: Making Transparent How Variations in Anlytical
Choices Affect Results.”</span> <a href="https://osf.io/gvm2z/" class="external-link">https://osf.io/gvm2z/</a>.
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Michael Jongho Moon, Haoda Li, Mingwei Xu, Nathan Taback, Fanny Chevalier.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer>
</div>






  </body>
</html>
