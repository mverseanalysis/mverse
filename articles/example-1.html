<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Example 1. Combining two independent ratings. • mverse</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Example 1. Combining two independent ratings.">
<meta property="og:description" content="mverse">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">mverse</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/example-1.html">Example 1. Combining two independent ratings.</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Example 1. Combining two independent ratings.</h1>
            
      
      
      <div class="hidden name"><code>example-1.Rmd</code></div>

    </div>

    
    
<p>The library comes preloaded with a dataset, <code>soccer</code>, from <span class="citation">(Silberzahn et al. 2014)</span> on card counts per each pair between 2,053 soccer players and 3,147 referees. Below are the first few lines of the dataset.</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">mverse</span>)
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="no">soccer</span>)</pre></body></html></div>
<table class="table">
<thead><tr>
<th style="text-align:left;">
playerShort
</th>
<th style="text-align:left;">
player
</th>
<th style="text-align:left;">
club
</th>
<th style="text-align:left;">
leagueCountry
</th>
<th style="text-align:left;">
birthday
</th>
<th style="text-align:right;">
height
</th>
<th style="text-align:right;">
weight
</th>
<th style="text-align:left;">
position
</th>
<th style="text-align:right;">
games
</th>
<th style="text-align:right;">
victories
</th>
<th style="text-align:right;">
ties
</th>
<th style="text-align:right;">
defeats
</th>
<th style="text-align:right;">
goals
</th>
<th style="text-align:right;">
yellowCards
</th>
<th style="text-align:right;">
yellowReds
</th>
<th style="text-align:right;">
redCards
</th>
<th style="text-align:right;">
rater1
</th>
<th style="text-align:right;">
rater2
</th>
<th style="text-align:right;">
refNum
</th>
<th style="text-align:right;">
refCountry
</th>
<th style="text-align:right;">
meanIAT
</th>
<th style="text-align:right;">
nIAT
</th>
<th style="text-align:right;">
seIAT
</th>
<th style="text-align:right;">
meanExp
</th>
<th style="text-align:right;">
nExp
</th>
<th style="text-align:right;">
seExp
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
lucas-wilchez
</td>
<td style="text-align:left;">
Lucas Wilchez
</td>
<td style="text-align:left;">
Real Zaragoza
</td>
<td style="text-align:left;">
Spain
</td>
<td style="text-align:left;">
31.08.1983
</td>
<td style="text-align:right;">
177
</td>
<td style="text-align:right;">
72
</td>
<td style="text-align:left;">
Attacking Midfielder
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.25
</td>
<td style="text-align:right;">
0.50
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.3263915
</td>
<td style="text-align:right;">
712
</td>
<td style="text-align:right;">
0.0005641
</td>
<td style="text-align:right;">
0.3960000
</td>
<td style="text-align:right;">
750
</td>
<td style="text-align:right;">
0.0026965
</td>
</tr>
<tr>
<td style="text-align:left;">
john-utaka
</td>
<td style="text-align:left;">
John Utaka
</td>
<td style="text-align:left;">
Montpellier HSC
</td>
<td style="text-align:left;">
France
</td>
<td style="text-align:left;">
08.01.1982
</td>
<td style="text-align:right;">
179
</td>
<td style="text-align:right;">
82
</td>
<td style="text-align:left;">
Right Winger
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.75
</td>
<td style="text-align:right;">
0.75
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.2033747
</td>
<td style="text-align:right;">
40
</td>
<td style="text-align:right;">
0.0108749
</td>
<td style="text-align:right;">
-0.2040816
</td>
<td style="text-align:right;">
49
</td>
<td style="text-align:right;">
0.0615044
</td>
</tr>
<tr>
<td style="text-align:left;">
abdon-prats
</td>
<td style="text-align:left;">
Abdon Prats
</td>
<td style="text-align:left;">
RCD Mallorca
</td>
<td style="text-align:left;">
Spain
</td>
<td style="text-align:left;">
17.12.1992
</td>
<td style="text-align:right;">
181
</td>
<td style="text-align:right;">
79
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0.3698936
</td>
<td style="text-align:right;">
1785
</td>
<td style="text-align:right;">
0.0002295
</td>
<td style="text-align:right;">
0.5882973
</td>
<td style="text-align:right;">
1897
</td>
<td style="text-align:right;">
0.0010016
</td>
</tr>
<tr>
<td style="text-align:left;">
pablo-mari
</td>
<td style="text-align:left;">
Pablo Mari
</td>
<td style="text-align:left;">
RCD Mallorca
</td>
<td style="text-align:left;">
Spain
</td>
<td style="text-align:left;">
31.08.1993
</td>
<td style="text-align:right;">
191
</td>
<td style="text-align:right;">
87
</td>
<td style="text-align:left;">
Center Back
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0.3698936
</td>
<td style="text-align:right;">
1785
</td>
<td style="text-align:right;">
0.0002295
</td>
<td style="text-align:right;">
0.5882973
</td>
<td style="text-align:right;">
1897
</td>
<td style="text-align:right;">
0.0010016
</td>
</tr>
<tr>
<td style="text-align:left;">
ruben-pena
</td>
<td style="text-align:left;">
Ruben Pena
</td>
<td style="text-align:left;">
Real Valladolid
</td>
<td style="text-align:left;">
Spain
</td>
<td style="text-align:left;">
18.07.1991
</td>
<td style="text-align:right;">
172
</td>
<td style="text-align:right;">
70
</td>
<td style="text-align:left;">
Right Midfielder
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0.3698936
</td>
<td style="text-align:right;">
1785
</td>
<td style="text-align:right;">
0.0002295
</td>
<td style="text-align:right;">
0.5882973
</td>
<td style="text-align:right;">
1897
</td>
<td style="text-align:right;">
0.0010016
</td>
</tr>
<tr>
<td style="text-align:left;">
aaron-hughes
</td>
<td style="text-align:left;">
Aaron Hughes
</td>
<td style="text-align:left;">
Fulham FC
</td>
<td style="text-align:left;">
England
</td>
<td style="text-align:left;">
08.11.1979
</td>
<td style="text-align:right;">
182
</td>
<td style="text-align:right;">
71
</td>
<td style="text-align:left;">
Center Back
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.25
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
0.3251852
</td>
<td style="text-align:right;">
127
</td>
<td style="text-align:right;">
0.0032968
</td>
<td style="text-align:right;">
0.5384615
</td>
<td style="text-align:right;">
130
</td>
<td style="text-align:right;">
0.0137522
</td>
</tr>
</tbody>
</table>
<p>The dataset was used to study whether racial bias played a role when referees issued the cards. For each player, two independent raters coded their skin tones on a 5-point scale ranging from <em>very light skin</em> (<code>0.0</code>) to <em>very dark skin</em> (<code>1.0</code>) with <em>neither dark nor light skin</em>(<code>0.5</code>) as the centre value.</p>
<p>We would like to study the distribution of the player skin tones but the two independent rating do not always match. To combine the two ratings, you may consider the following options:</p>
<ol style="list-style-type: decimal">
<li>the mean numeric value</li>
<li>the darker rating of the two</li>
<li>the lighter rating of the two</li>
<li>the first rating only</li>
<li>the second rating only</li>
</ol>
<div id="without-the-mverse-library-" class="section level2">
<h2 class="hasAnchor">
<a href="#without-the-mverse-library-" class="anchor"></a>1. Without the <code>mverse</code> library.</h2>
<p>Let’s first consider how you might study the five options using base R.<br>
First, we will define the five options as separate variables.</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="co"># remove rows with no rating</span>
<span class="no">soccer</span> <span class="kw">&lt;-</span> <span class="no">soccer</span>[!<span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span>(<span class="no">soccer</span>$<span class="no">rater1</span>), ]

<span class="no">skin_option_1</span> <span class="kw">&lt;-</span> (                <span class="co"># mean</span>
  <span class="no">soccer</span>$<span class="no">rater1</span> + <span class="no">soccer</span>$<span class="no">rater2</span>) / <span class="fl">2</span>
<span class="no">skin_option_2</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span>(          <span class="co"># max</span>
  <span class="no">soccer</span>$<span class="no">rater1</span> <span class="kw">&gt;</span> <span class="no">soccer</span>$<span class="no">rater2</span>,
  <span class="no">soccer</span>$<span class="no">rater1</span>, <span class="no">soccer</span>$<span class="no">rater2</span>)
<span class="no">skin_option_3</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span>(          <span class="co"># min</span>
  <span class="no">soccer</span>$<span class="no">rater1</span> <span class="kw">&lt;</span> <span class="no">soccer</span>$<span class="no">rater2</span>,
  <span class="no">soccer</span>$<span class="no">rater1</span>, <span class="no">soccer</span>$<span class="no">rater2</span>)
<span class="no">skin_option_4</span> <span class="kw">&lt;-</span> <span class="no">soccer</span>$<span class="no">rater1</span>    <span class="co"># first</span>
<span class="no">skin_option_5</span> <span class="kw">&lt;-</span> <span class="no">soccer</span>$<span class="no">rater2</span>    <span class="co"># second</span></pre></body></html></div>
<p>We can plot their histograms to study the distributions. We will use the <code>ggplot2</code> library for plotting.</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">ggplot2</span>)
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="kw">mapping</span><span class="kw">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="kw">x</span> <span class="kw">=</span> <span class="no">skin_option_1</span>)) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span>(<span class="kw">breaks</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(<span class="fl">0</span>,<span class="fl">1</span>,<span class="fl">0.2</span>),
                 <span class="kw">colour</span> <span class="kw">=</span> <span class="st">'white'</span>) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span>(<span class="kw">title</span> <span class="kw">=</span> <span class="st">'Histogram of player skin tones.'</span>,
       <span class="kw">x</span> <span class="kw">=</span> <span class="st">'Skin Tone'</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="st">'Count'</span>)</pre></body></html></div>
<p><img src="example-1_files/figure-html/hist_base-1.png" width="384"></p>
<p>Now, for the remaining four variable definitions, we will have to repeat the step above.</p>
<div id="exercise-" class="section level3">
<h3 class="hasAnchor">
<a href="#exercise-" class="anchor"></a>Exercise.</h3>
<ol style="list-style-type: decimal">
<li>Plot histograms for the remaining four options in base R. How would you display the five plots together?</li>
<li>How would you perform the same analysis using the <code>tidyverse</code> package?</li>
</ol>
</div>
</div>
<div id="basic-branching-using-mverse-" class="section level2">
<h2 class="hasAnchor">
<a href="#basic-branching-using-mverse-" class="anchor"></a>2. Basic Branching using <code>mverse</code>.</h2>
<p>We will now learn how we can create the options using the <code>mverse</code> package. We first consider the first two options.</p>
<ol style="list-style-type: decimal">
<li>the mean numeric value</li>
<li>the darker rating of the two</li>
</ol>
<p>First, we will define a <code>mverse</code> object from the data set.</p>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="no">mv</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/mverse/man/mverse.html">create_multiverse</a></span>(<span class="no">soccer</span>)</pre></body></html></div>
<p>In <code>mverse</code> package, an alternative variabe definition is called a variable branch. You can create a variable branch with the function <code>variable_branch</code>.</p>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="no">skin_tone</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/mverse/man/variable_branch.html">variable_branch</a></span>(
  (<span class="no">rater1</span> + <span class="no">rater2</span>)/<span class="fl">2</span>,
  <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span>(<span class="no">rater1</span> <span class="kw">&gt;</span> <span class="no">rater2</span>, <span class="no">rater1</span>, <span class="no">rater2</span>)
)</pre></body></html></div>
</div>
<div id="r-variable_branch-skin_tone---variable_branch-rater1-rater22-ifelserater1-rater2-rater1-rater2-ifelserater1-rater2-rater2-rater1-rater1-rater2" class="section level1">
<h1 class="hasAnchor">
<a href="#r-variable_branch-skin_tone---variable_branch-rater1-rater22-ifelserater1-rater2-rater1-rater2-ifelserater1-rater2-rater2-rater1-rater1-rater2" class="anchor"></a><code>{r variable_branch} # skin_tone &lt;- variable_branch( #   (rater1 + rater2)/2, #   ifelse(rater1 &gt; rater2, rater1, rater2), #   ifelse(rater1 &gt; rater2, rater2, rater1), #   rater1, #   rater2 # ) #</code>
</h1>
<p>You can then add the variable branch rules to the <code>mverse</code> object using <code>add_variable_branch</code>. You can use the <code>tidyverse</code>’s <code>dplyr</code> grammar for defining the variable rules.</p>
<div class="sourceCode" id="cb6"><html><body><pre class="r"><span class="no">mv</span> <span class="kw">&lt;-</span> <span class="no">mv</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/mverse/man/add_variable_branch.html">add_variable_branch</a></span>(<span class="no">skin_tone</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/mverse/man/execute_multiverse.html">execute_multiverse</a></span>()</pre></body></html></div>
<p>The object name <code>skin_tone</code> is the name of the new variable defined. Each alternative definition creates an alternative <em>universe</em> in the <code>mverse</code> object. <code>execute_multiverse</code> generates the new variable based on the branching rules provided by <code>add_variable_branch</code>.</p>
<p>You can see the variable branch added with <code>summary</code> method for the <code>mverse</code> object.</p>
<div class="sourceCode" id="cb7"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/pkg/mverse/man/summary.html">summary</a></span>(<span class="no">mv</span>) <span class="kw">%&gt;%</span>
  <span class="fu">kable</span>() <span class="co"># for display in the documentation</span></pre></body></html></div>
<table class="table">
<thead><tr>
<th style="text-align:right;">
universe
</th>
<th style="text-align:left;">
skin_tone_branch
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
(rater1 + rater2)/2
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
ifelse(rater1 &gt; rater2, rater1, rater2)
</td>
</tr>
</tbody>
</table>
<div id="exercise--1" class="section level3">
<h3 class="hasAnchor">
<a href="#exercise--1" class="anchor"></a>Exercise.</h3>
<ol style="list-style-type: decimal">
<li>Define and add the variable branches for the remaining three options.</li>
<li>Print the multiverse table. How many <em>universes</em> does your multiverse produce?</li>
</ol>
</div>
<div id="comparing-between-universes-" class="section level2">
<h2 class="hasAnchor">
<a href="#comparing-between-universes-" class="anchor"></a>3. Comparing between Universes.</h2>
<p>In this section, we will now examine and compare the distributions of the variable branches. You can extract the resulting value of branched variables using <code>extract</code> method. By default, it returns the branched variables across all universes with the universe index. Note that the universe index column is returned as a factor variable.</p>
<div class="sourceCode" id="cb8"><html><body><pre class="r"><span class="no">branched</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/mverse/man/extract.html">extract</a></span>(<span class="no">mv</span>)
<span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span>(<span class="no">branched</span>)
<span class="co">#&gt; [1] 249242      2</span></pre></body></html></div>
<p>It provides various options to select a subset of data only. <code>universe</code> and <code>nuni</code> are useful if you want to select a subset of universes in the multiverse. <code>frow</code> provides the option to extract a fraction of data in each universe.</p>
<div class="sourceCode" id="cb9"><html><body><pre class="r"><span class="no">frac</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/mverse/man/extract.html">extract</a></span>(<span class="no">mv</span>, <span class="kw">frow</span> <span class="kw">=</span>  <span class="fl">0.05</span>)
<span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span>(<span class="no">frac</span>)/<span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span>(<span class="no">branched</span>)
<span class="co">#&gt; [1] 0.0499996</span></pre></body></html></div>
<p>Using the output tibble, you can construct plots to compare their distributions in different universes. For example, you can overlay density lines on a single plot.</p>
<div class="sourceCode" id="cb10"><html><body><pre class="r"><span class="no">branched</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="kw">mapping</span> <span class="kw">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="kw">x</span> <span class="kw">=</span> <span class="no">skin_tone</span>, <span class="kw">color</span> <span class="kw">=</span> <span class="no">universe</span>)) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_density.html">geom_density</a></span>(<span class="kw">alpha</span> <span class="kw">=</span> <span class="fl">0.2</span>) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span>(<span class="st">'Skin Tone'</span>) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ylab</a></span>(<span class="st">'Density'</span>)</pre></body></html></div>
<p><img src="example-1_files/figure-html/compare_universe-1.png" width="384"></p>
<p>Another option is the use <code>ggplot</code>’s <code>facet_grid</code> function to generate multiple plots in a grid.</p>
<div class="sourceCode" id="cb11"><html><body><pre class="r"><span class="no">branched</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="kw">mapping</span> <span class="kw">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="kw">x</span> <span class="kw">=</span> <span class="no">skin_tone</span>, <span class="kw">fill</span> <span class="kw">=</span> <span class="no">universe</span>)) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span>(<span class="kw">position</span> <span class="kw">=</span> <span class="st">'dodge'</span>, <span class="kw">bins</span> <span class="kw">=</span> <span class="fl">10</span>) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span>(<span class="kw">title</span> <span class="kw">=</span> <span class="st">'Histogram of player skin tones.'</span>,
       <span class="kw">y</span> <span class="kw">=</span> <span class="st">'Count'</span>, <span class="kw">x</span><span class="kw">=</span><span class="st">'Skin Tone'</span>) +
  <span class="co"># generate histograms for each universe and place along a column.</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html">facet_grid</a></span>(<span class="no">.</span> ~ <span class="no">universe</span>)</pre></body></html></div>
<p><img src="example-1_files/figure-html/compare_universe_hist-1.png" width="384"></p>
<div id="exercise--2" class="section level3">
<h3 class="hasAnchor">
<a href="#exercise--2" class="anchor"></a>Exercise.</h3>
<ol style="list-style-type: decimal">
<li>Use <code>geom_boxplot</code> to compare the distributions between the five options.</li>
<li>Construct a grid of histograms for all the five options. Use <code>universe ~ .</code> instead of <code>. ~ universe</code> in <code>facet_grid</code>.</li>
</ol>
</div>
</div>
<div id="discussion-" class="section level2">
<h2 class="hasAnchor">
<a href="#discussion-" class="anchor"></a>Discussion.</h2>
<ol style="list-style-type: decimal">
<li>The five options each result in different distributions. Does one option provide a more <em>objective</em> rating than others?</li>
<li>Among the three types of plots - density plot, histogram, and boxplot, which plot do you find the most effective at comparing different distributions?</li>
</ol>
</div>
<div id="references" class="section level2 unnumbered">
<h2 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h2>
<div id="refs" class="references">
<div id="ref-datasrc">
<p>Silberzahn, Raphael, Eric Luis Uhlmann, Dan Martin, Pasquale Anselmi, Frederik Aust, Eli C. Awtrey, Štěpán Bahník, et al. 2014. “Many Analysts, One Dataset: Making Transparent How Variations in Anlytical Choices Affect Results.” <a href="https://osf.io/gvm2z/" class="uri">https://osf.io/gvm2z/</a>.</p>
</div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Michael Jongho Moon, Nathan Taback, Fanny Chevalier.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
